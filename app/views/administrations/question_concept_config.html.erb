<nav>
  <div class="admin-nav">
    <h2>Administrácia konceptov otáziek</h2>
    <%= link_to "Administrácia", administration_path, class: 'admin-nav-button' %>
  </div>
</nav>
<hr class="nav-offset">

<div class="admin wide">
  <table id="question-concept-table">
    <% @questions.each do |q| %>
        <tr>
            <td>
              <div class="question-concept-table-cell">
                  <strong><%=q.lo_id %></strong>
                  <%=q.question_text %>
                  <span class="question-concept-table-answers">
                  <% q.answers.each do |a| %>
                      "<%= a.answer_text %>",
                  <% end %>
                </span>
              </div>
            </td>
            <td style="width: 50%;">
              <div class="question-concept-table-cell">
              <% q.concepts.each do |c| %>
                  <%= render partial: 'concept', locals: {concept: c, question: q} %>
              <% end %>
              </div>
            </td>
        </tr>
    <% end %>
  </table>

</div>


<script>
  $('td:first-child .question-concept-table-cell').click(function() {
     $(this).closest('tr').find('.question-concept-table-cell').toggleClass('show');
  });

  $('.concept-delete').click(function() {
      $.ajax({
          url: '/admin/delete_question_concept',
          method: 'POST',
          data: {
              question_id: $(this).data('question-id'),
              concept_id: $(this).data('concept-id')
          }
      });
  });

</script>

